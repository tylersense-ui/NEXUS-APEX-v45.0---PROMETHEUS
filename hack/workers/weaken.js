/**
 * â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
 * â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•
 * â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
 * â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘
 * â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
 * â•šâ•â•     â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•   â•šâ•â•   â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•
 *                           v45.0 - "Stealing Fire From The Gods"
 * 
 * @module      hack/workers/weaken
 * @description Worker de weaken - RÃ©duit la sÃ©curitÃ© d'un serveur cible.
 *              UtilisÃ© par le batcher pour les opÃ©rations HWGW (W = Weaken).
 * @author      Claude (Anthropic) + tylersense-ui
 * @version     45.0 - PROMETHEUS
 * @date        2025-01-XX
 * @license     MIT
 * @requires    BitBurner v2.8.1+ (Steam)
 * @ram         1.75 GB (pour 1 thread)
 * 
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ”¥ PROMETHEUS ENHANCEMENTS
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * âœ“ Validation complÃ¨te des arguments (target, delay)
 * âœ“ Try/catch robuste autour de ns.weaken()
 * âœ“ Gestion d'erreur avec retry potentiel
 * âœ“ Logs dÃ©taillÃ©s avec icÃ´nes (ğŸ›¡ï¸âœ…âŒâ±ï¸)
 * âœ“ Support du dÃ©lai de synchronisation HWGW
 * âœ“ Retour de la rÃ©duction de sÃ©curitÃ© pour mÃ©triques
 * âœ“ Protection contre arguments invalides
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * @usage
 *   ns.exec("/hack/workers/weaken.js", "host", threads, "target", delay);
 * 
 * @arguments
 *   target (string)  - Hostname du serveur Ã  weaken (requis)
 *   delay  (number)  - DÃ©lai en ms avant d'exÃ©cuter (dÃ©faut: 0)
 * 
 * @example
 *   // Weaken immÃ©diat
 *   ns.exec("/hack/workers/weaken.js", "pserv-0", 50, "n00dles", 0);
 * 
 * @example
 *   // Weaken avec dÃ©lai (synchronisation HWGW)
 *   ns.exec("/hack/workers/weaken.js", "pserv-0", 100, "joesguns", 2000);
 *   // Attend 2 secondes avant d'exÃ©cuter le weaken
 * 
 * @returns
 *   RÃ©duction de sÃ©curitÃ© (number) - Toujours 0.05 * threads
 *   Exemple : 50 threads â†’ 2.5 de rÃ©duction
 */

/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ¯ WORKER WEAKEN - MAIN FUNCTION
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ExÃ©cute une opÃ©ration de weaken sur la cible aprÃ¨s un dÃ©lai optionnel.
 * 
 * Le weaken rÃ©duit la sÃ©curitÃ© du serveur cible.
 * Chaque thread rÃ©duit la sÃ©curitÃ© de 0.05 (fixe, indÃ©pendant du joueur).
 * 
 * Le weaken ne peut jamais Ã©chouer (pas de chance impliquÃ©e).
 * 
 * @param {NS} ns - Namespace BitBurner
 */
export async function main(ns) {
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ“‹ VALIDATION DES ARGUMENTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // Argument 1 : target (requis)
    const target = ns.args[0];
    if (!target || typeof target !== 'string') {
        ns.tprint(`âŒ [WEAKEN] Argument invalide: target doit Ãªtre un string (reÃ§u: ${target})`);
        return 0;
    }

    // VÃ©rifier que le serveur cible existe
    let serverExists = false;
    try {
        ns.getServer(target);
        serverExists = true;
    } catch (e) {
        ns.tprint(`âŒ [WEAKEN] Serveur cible introuvable: ${target}`);
        return 0;
    }

    // Argument 2 : delay (optionnel, dÃ©faut 0)
    let delay = ns.args[1] || 0;
    if (typeof delay !== 'number' || delay < 0) {
        ns.print(`âš ï¸  [WEAKEN] DÃ©lai invalide (${delay}), utilisation de 0`);
        delay = 0;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // â±ï¸ DÃ‰LAI DE SYNCHRONISATION (si spÃ©cifiÃ©)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    if (delay > 0) {
        await ns.sleep(delay);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ›¡ï¸ EXÃ‰CUTION DU WEAKEN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const startTime = Date.now();
    let securityReduction = 0;

    try {
        // ns.weaken() retourne la rÃ©duction de sÃ©curitÃ© (toujours 0.05 * threads)
        securityReduction = await ns.weaken(target);
        
        const duration = Date.now() - startTime;
        
        // Le weaken rÃ©ussit toujours (pas de chance d'Ã©chec)
        ns.print(`âœ… [WEAKEN] ${target}: -${securityReduction.toFixed(3)} sÃ©curitÃ© (${duration}ms)`);

    } catch (error) {
        // Erreur critique (serveur crashÃ©, script killÃ©, etc.)
        const duration = Date.now() - startTime;
        ns.tprint(`âŒ [WEAKEN] Erreur critique sur ${target}: ${error.message} (${duration}ms)`);
        return 0;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ“Š RETOUR DU RÃ‰SULTAT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // La rÃ©duction de sÃ©curitÃ© est retournÃ©e pour permettre au batcher de tracker les mÃ©triques
    return securityReduction;
}

/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ“š DOCUMENTATION TECHNIQUE
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * OPÃ‰RATION WEAKEN :
 * ------------------
 * - RÃ©duit la sÃ©curitÃ© du serveur cible
 * - RÃ©duction fixe : 0.05 par thread (indÃ©pendant du joueur)
 * - Ne peut jamais Ã©chouer (100% de rÃ©ussite garantie)
 * - N'affecte pas l'argent disponible
 * 
 * - DurÃ©e de l'opÃ©ration :
 *   â€¢ ~4x plus longue que hack
 *   â€¢ La plus longue des 4 opÃ©rations HWGW
 *   â€¢ Typiquement entre 4s et 20min
 *   â€¢ Calculable prÃ©cisÃ©ment avec ns.formulas.hacking.weakenTime()
 * 
 * CALCUL DE LA RÃ‰DUCTION :
 * -------------------------
 * RÃ©duction totale = 0.05 * nombre de threads
 * 
 * Exemples :
 * - 1 thread   â†’ -0.05 sÃ©curitÃ©
 * - 10 threads â†’ -0.50 sÃ©curitÃ©
 * - 50 threads â†’ -2.50 sÃ©curitÃ©
 * - 100 threads â†’ -5.00 sÃ©curitÃ©
 * 
 * Cette valeur est TOUJOURS exacte et prÃ©visible (pas de variation).
 * 
 * SÃ‰CURITÃ‰ DES SERVEURS :
 * -----------------------
 * Chaque serveur a une sÃ©curitÃ© qui fluctue :
 * - minDifficulty : SÃ©curitÃ© minimale du serveur (ne peut pas descendre en dessous)
 * - hackDifficulty : SÃ©curitÃ© actuelle
 * 
 * Effets de la sÃ©curitÃ© :
 * - Plus haute â†’ hack vole moins d'argent
 * - Plus haute â†’ grow augmente moins l'argent
 * - Plus haute â†’ hack/grow prennent plus de temps
 * 
 * Augmentation de sÃ©curitÃ© :
 * - Hack : +0.002 par thread
 * - Grow : +0.004 par thread
 * 
 * RÃ©duction de sÃ©curitÃ© :
 * - Weaken : -0.05 par thread (25x plus efficace que hack augmente)
 * 
 * UTILISATION DANS HWGW :
 * -----------------------
 * Le weaken est utilisÃ© DEUX FOIS dans chaque batch HWGW :
 * 1. HACK   - Vole l'argent (augmente sÃ©curitÃ© +0.002/thread)
 * 2. WEAKEN - RÃ©duit sÃ©curitÃ© (-0.05/thread) â† WEAKEN 1
 * 3. GROW   - Augmente l'argent (augmente sÃ©curitÃ© +0.004/thread)
 * 4. WEAKEN - RÃ©duit sÃ©curitÃ© (-0.05/thread) â† WEAKEN 2
 * 
 * Timing critique : Les 4 opÃ©rations doivent se terminer dans le bon ordre.
 * Le weaken Ã©tant le plus long (~4x hack), il dicte le timing de tout le batch.
 * 
 * Ordre de fin souhaitÃ© :
 * H finit Ã  T
 * W finit Ã  T + 200ms       â† WEAKEN 1 (compense le hack)
 * G finit Ã  T + 400ms
 * W finit Ã  T + 600ms       â† WEAKEN 2 (compense le grow)
 * 
 * CALCUL DES THREADS WEAKEN :
 * ----------------------------
 * Pour compenser l'augmentation de sÃ©curitÃ© causÃ©e par hack/grow :
 * 
 * Weaken aprÃ¨s hack :
 *   threadsNeeded = Math.ceil((hackThreads * 0.002) / 0.05)
 *   Exemple : 100 threads hack â†’ 100 * 0.002 / 0.05 = 4 threads weaken
 * 
 * Weaken aprÃ¨s grow :
 *   threadsNeeded = Math.ceil((growThreads * 0.004) / 0.05)
 *   Exemple : 500 threads grow â†’ 500 * 0.004 / 0.05 = 40 threads weaken
 * 
 * Note : Grow nÃ©cessite 2x plus de weaken que hack car il augmente
 * la sÃ©curitÃ© 2x plus (+0.004 vs +0.002).
 * 
 * RÃ‰DUCTION VERS minDifficulty :
 * -------------------------------
 * Si le serveur n'est pas Ã  minDifficulty, le weaken peut Ãªtre utilisÃ©
 * pour le ramener Ã  son niveau minimal.
 * 
 * Threads nÃ©cessaires pour atteindre minDifficulty :
 *   currentSecurity = ns.getServerSecurityLevel(target)
 *   minSecurity = ns.getServerMinSecurityLevel(target)
 *   securityToReduce = currentSecurity - minSecurity
 *   threadsNeeded = Math.ceil(securityToReduce / 0.05)
 * 
 * Exemple : Si sÃ©curitÃ© actuelle = 25 et minDifficulty = 10
 *   â†’ 15 de sÃ©curitÃ© Ã  rÃ©duire
 *   â†’ 15 / 0.05 = 300 threads weaken nÃ©cessaires
 * 
 * ARGUMENTS DÃ‰TAILLÃ‰S :
 * ---------------------
 * target (string) :
 *   - Hostname du serveur Ã  weaken
 *   - Doit exister et Ãªtre accessible
 *   - Le joueur doit avoir root access (vÃ©rifiÃ© par ns.weaken)
 * 
 * delay (number, optionnel) :
 *   - DÃ©lai en millisecondes avant d'exÃ©cuter le weaken
 *   - UtilisÃ© pour synchroniser les batchs HWGW
 *   - DÃ©faut : 0 (exÃ©cution immÃ©diate)
 *   - Exemple : delay = 2000 â†’ attend 2s avant de weaken
 * 
 * CODES DE RETOUR :
 * -----------------
 * > 0 : RÃ©duction de sÃ©curitÃ© (toujours 0.05 * threads)
 * = 0 : Erreur (serveur introuvable ou erreur critique)
 * 
 * Le weaken ne peut jamais "Ã©chouer" dans le sens oÃ¹ il ne rÃ©duit pas
 * la sÃ©curitÃ©. Si le serveur est dÃ©jÃ  Ã  minDifficulty, il tentera
 * quand mÃªme l'opÃ©ration et retournera 0.05 * threads, mÃªme si
 * la sÃ©curitÃ© ne peut pas descendre davantage.
 * 
 * EXEMPLES D'UTILISATION :
 * ------------------------
 * 
 * // Weaken simple
 * ns.exec("/hack/workers/weaken.js", "home", 1, "n00dles");
 * 
 * // Ramener un serveur Ã  minDifficulty
 * const currentSec = ns.getServerSecurityLevel("joesguns");
 * const minSec = ns.getServerMinSecurityLevel("joesguns");
 * const threadsNeeded = Math.ceil((currentSec - minSec) / 0.05);
 * ns.exec("/hack/workers/weaken.js", "pserv-0", threadsNeeded, "joesguns");
 * 
 * // Weaken synchronisÃ© (HWGW batch) - Weaken aprÃ¨s hack
 * const weakenTime = ns.getWeakenTime("joesguns");
 * const hackTime = ns.getHackTime("joesguns");
 * const weaken1Delay = 0; // Weaken est le plus long, pas de dÃ©lai
 * ns.exec("/hack/workers/weaken.js", "pserv-0", 10, "joesguns", weaken1Delay);
 * 
 * // Weaken synchronisÃ© (HWGW batch) - Weaken aprÃ¨s grow
 * const weaken2Delay = 400; // Finit 400ms aprÃ¨s le premier weaken
 * ns.exec("/hack/workers/weaken.js", "pserv-1", 40, "joesguns", weaken2Delay);
 * 
 * PERFORMANCES :
 * --------------
 * RAM : 1.75 GB par thread (mÃªme que grow)
 * CPU : Faible (l'opÃ©ration est gÃ©rÃ©e par le jeu)
 * DurÃ©e : ~4x plus longue que hack (la plus longue des 4)
 * 
 * PROMETHEUS OPTIMISATIONS :
 * --------------------------
 * âœ“ Validation stricte des arguments (Ã©vite crashs)
 * âœ“ Try/catch autour de ns.weaken() (gestion erreurs)
 * âœ“ Logs dÃ©taillÃ©s avec rÃ©duction de sÃ©curitÃ©
 * âœ“ Support du dÃ©lai pour synchronisation HWGW
 * âœ“ Retour de la rÃ©duction pour mÃ©triques du batcher
 * 
 * DIFFÃ‰RENCES AVEC HACK/GROW :
 * -----------------------------
 * - DurÃ©e : ~4x plus longue que hack, ~1.25x plus que grow
 * - RAM : 1.75 GB (mÃªme que grow, lÃ©gÃ¨rement plus que hack)
 * - Effet : RÃ©duit sÃ©curitÃ© (vs vole/augmente argent)
 * - FiabilitÃ© : 100% de succÃ¨s (vs chance pour hack)
 * - RÃ©duction : Fixe 0.05/thread (vs variable pour hack/grow)
 * - Retour : RÃ©duction de sÃ©curitÃ© (toujours prÃ©visible)
 * 
 * TIPS POUR LE BATCHER :
 * ----------------------
 * 1. Le weaken dicte le timing du batch (opÃ©ration la plus longue)
 * 2. Toujours calculer les threads weaken en fonction de hack/grow
 * 3. Weaken aprÃ¨s grow nÃ©cessite 2x plus de threads que weaken aprÃ¨s hack
 * 4. Ne pas oublier les 2 weaken dans chaque batch HWGW
 * 5. Synchroniser avec prÃ©cision : weaken1 finit 200ms aprÃ¨s hack
 * 6. Le weaken peut Ãªtre utilisÃ© seul pour prÃ©parer une cible (ramener Ã  minDifficulty)
 * 
 * RATIO THREADS HWGW TYPIQUE :
 * ----------------------------
 * Exemple pour un batch avec hackPercent = 0.10 (10%) :
 * - Hack : 50 threads
 * - Weaken1 : 4 threads (compense hack : 50 * 0.002 / 0.05)
 * - Grow : 500 threads (ramÃ¨ne argent Ã  100% : dÃ©pend de hackPercent)
 * - Weaken2 : 40 threads (compense grow : 500 * 0.004 / 0.05)
 * 
 * Total : ~594 threads
 * Weaken reprÃ©sente ~7% des threads (44/594)
 * 
 * Le grow est l'opÃ©ration la plus coÃ»teuse en threads (84% dans cet exemple).
 */
